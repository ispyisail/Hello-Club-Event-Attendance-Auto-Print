# Version 1.1.0 Testing Checklist

This document provides a comprehensive testing checklist for validating the changes introduced in version 1.1.0, particularly the non-admin installation support and optional Windows service.

## Summary of Changes in v1.1.0

### Major Changes
1. **Non-Admin Installation** - Default installation no longer requires administrator rights
2. **New Install Location** - Changed from `C:\Program Files` to `%LOCALAPPDATA%` (user folder)
3. **Optional Windows Service** - Service installation is now optional and unchecked by default
4. **SMTP Port Field Fix** - Fixed visibility of SMTP Port field in installer UI

### Files Modified
- `installer/setup.iss` - Changed default location and privileges
- `complete-installation.bat` - Updated to support both installation paths
- `README.md` - Updated documentation
- Multiple documentation files - Reflected new installation process

---

## Pre-Testing Setup

### Test Environment Requirements

**Recommended:**
- Clean Windows 10/11 virtual machine
- Node.js 18.x or later installed
- Internet connection

**Test Scenarios:**
1. Fresh installation (non-admin)
2. Fresh installation (with service, requires admin)
3. Upgrade from v1.0.x
4. Migration from Program Files to LocalAppData

---

## Testing Checklist

### ✅ Section 1: Non-Admin Installation (Standard Mode)

**Goal:** Verify the application can be installed without administrator rights

**Prerequisites:**
- Clean Windows VM or user account
- Node.js installed
- Do NOT run installer as administrator

**Steps:**
1. [ ] Double-click `HelloClubEventAttendance-Setup-1.1.0.exe`
2. [ ] Proceed through installer without admin prompt
3. [ ] Verify default install location shows: `%LOCALAPPDATA%\Hello Club Event Attendance`
4. [ ] Leave "Install Windows service" **unchecked**
5. [ ] Check "Launch tray monitor automatically"
6. [ ] Enter API key and SMTP credentials
7. [ ] Complete installation

**Verification:**
- [ ] Installation completes without UAC prompts
- [ ] Files installed to `C:\Users\{YourName}\AppData\Local\Hello Club Event Attendance\`
- [ ] Tray monitor launches successfully
- [ ] No service installed: `sc query HelloClubEventAttendance` shows "does not exist"
- [ ] Tray icon appears in system tray
- [ ] Application can fetch events and process them via tray monitor

**Expected Result:** ✅ Application fully functional without Windows service

---

### ✅ Section 2: Installation with Windows Service (Requires Admin)

**Goal:** Verify Windows service installation still works when explicitly selected

**Prerequisites:**
- Clean Windows VM or user account
- Node.js installed
- Prepare to run installer as administrator

**Steps:**
1. [ ] Right-click `HelloClubEventAttendance-Setup-1.1.0.exe` → "Run as Administrator"
2. [ ] Proceed through installer
3. [ ] **Check** "Install Windows service" option
4. [ ] Complete installation with API credentials

**Verification:**
- [ ] UAC prompt appears (expected because service requires admin)
- [ ] Files installed to `%LOCALAPPDATA%\Hello Club Event Attendance\`
- [ ] Service installed: `sc query HelloClubEventAttendance` shows "RUNNING"
- [ ] Service set to auto-start: `sc qc HelloClubEventAttendance` shows "AUTO_START"
- [ ] Both tray monitor AND service are running
- [ ] Service processes events in background even after logging out

**Expected Result:** ✅ Windows service operates independently from tray monitor

---

### ✅ Section 3: SMTP Port Field Visibility

**Goal:** Verify SMTP Port field is visible during installation

**Steps:**
1. [ ] Run installer
2. [ ] Proceed to "Email Configuration" page
3. [ ] Observe all fields

**Verification:**
- [ ] SMTP Username field visible
- [ ] SMTP Password field visible
- [ ] SMTP Host field visible and pre-filled with `smtp.gmail.com`
- [ ] **SMTP Port field visible** and pre-filled with `587`
- [ ] All fields are properly aligned and not overlapping

**Expected Result:** ✅ All SMTP fields display correctly without UI issues

---

### ✅ Section 4: Backward Compatibility - Upgrade Path

**Goal:** Ensure users can upgrade from v1.0.x to v1.1.0

**Prerequisites:**
- Existing v1.0.x installation in `C:\Program Files\Hello Club Event Attendance`
- Service running with existing configuration

**Steps:**
1. [ ] Note current configuration (`.env`, `config.json`)
2. [ ] Note current database state (`events.db`)
3. [ ] Run v1.1.0 installer
4. [ ] Observe installation behavior

**Verification:**
- [ ] Installer detects existing installation (if applicable)
- [ ] Option to upgrade or install side-by-side
- [ ] After upgrade, application still works from original location
- [ ] Configuration files preserved
- [ ] Database preserved
- [ ] Service continues running without issues

**Expected Result:** ✅ Seamless upgrade maintains all user data and settings

---

### ✅ Section 5: Migration from v1.0.x to v1.1.0 (Clean Install)

**Goal:** Test migration scenario for users wanting to move to new location

**Prerequisites:**
- Existing v1.0.x installation in Program Files

**Steps:**
1. [ ] Export/backup `.env` and `config.json` from old location
2. [ ] Uninstall v1.0.x from Control Panel
3. [ ] Install v1.1.0 (standard non-admin installation)
4. [ ] Copy `.env` and `config.json` to new location
5. [ ] Launch tray monitor

**Verification:**
- [ ] Old installation properly removed from Program Files
- [ ] New installation works from `%LOCALAPPDATA%`
- [ ] Configuration successfully imported
- [ ] Application functions normally with migrated config

**Expected Result:** ✅ Clean migration path with preserved settings

---

### ✅ Section 6: complete-installation.bat Script

**Goal:** Verify helper script works with both installation locations

**Test Case 1: New Installation**
```cmd
cd "%LOCALAPPDATA%\Hello Club Event Attendance"
..\complete-installation.bat
```

**Verification:**
- [ ] Script detects LocalAppData installation
- [ ] Runs `npm install` successfully
- [ ] Creates `.env` from `.env.example` if needed

**Test Case 2: Legacy Installation**
```cmd
cd "C:\Program Files\Hello Club Event Attendance"
..\complete-installation.bat
```

**Verification:**
- [ ] Script detects Program Files installation
- [ ] Runs `npm install` successfully
- [ ] Works with elevated privileges

**Expected Result:** ✅ Script supports both installation paths

---

### ✅ Section 7: Tray Monitor Without Service

**Goal:** Verify tray monitor can handle event processing without Windows service

**Prerequisites:**
- Installation without Windows service

**Steps:**
1. [ ] Launch tray monitor
2. [ ] Right-click tray icon → "Check Status Now"
3. [ ] Create a test event in Hello Club (within fetch window)
4. [ ] Wait for scheduled fetch (or manually trigger via CLI)
5. [ ] Verify event processing

**Verification:**
- [ ] Tray monitor shows "Service: Not Installed" or similar
- [ ] Application still fetches events on schedule
- [ ] Events are processed and printed
- [ ] Logs show normal operation
- [ ] No errors about missing service

**Expected Result:** ✅ Application fully functional without Windows service

---

### ✅ Section 8: Uninstallation

**Goal:** Verify clean uninstallation from both locations

**Test Case 1: LocalAppData Uninstall**
1. [ ] Install to LocalAppData
2. [ ] Use application, create logs
3. [ ] Uninstall from Settings → Apps
4. [ ] Verify `%LOCALAPPDATA%\Hello Club Event Attendance` removed

**Test Case 2: Service Uninstall**
1. [ ] Install with Windows service
2. [ ] Uninstall from Settings → Apps
3. [ ] Verify service stopped and removed: `sc query HelloClubEventAttendance`

**Expected Result:** ✅ Complete and clean removal

---

### ✅ Section 9: Documentation Accuracy

**Goal:** Verify all documentation reflects new installation process

**Files to Review:**
- [ ] `README.md` - Check Quick Start section mentions no admin required
- [ ] `README.md` - Check version numbers updated to 1.1.0
- [ ] `docs/INSTALLER-USER-GUIDE.md` - Check installation steps reflect new process
- [ ] `docs/ARCHITECTURE.md` - Check deployment paths updated
- [ ] `installer/README.md` - Check build instructions updated

**Verification:**
- [ ] No references to "requires Administrator" (except for service)
- [ ] Installation paths reference `%LOCALAPPDATA%` not `Program Files`
- [ ] Version numbers consistently show 1.1.0
- [ ] Optional service installation clearly documented

**Expected Result:** ✅ Documentation is accurate and consistent

---

### ✅ Section 10: Package Dependencies

**Goal:** Verify package-lock.json is synchronized

**Steps:**
```bash
cd /path/to/project
npm ci
```

**Verification:**
- [ ] `npm ci` completes without errors
- [ ] All dependencies installed correctly
- [ ] No warnings about missing or mismatched packages
- [ ] Application runs after clean install

**Expected Result:** ✅ Dependencies are consistent and complete

---

## Issue Tracking

### Issues Found

| # | Issue | Severity | Status | Notes |
|---|-------|----------|--------|-------|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |

### Test Results Summary

- **Total Tests:** 10 sections
- **Passed:** ___
- **Failed:** ___
- **Blocked:** ___

---

## Sign-Off

**Tested By:** _______________
**Date:** _______________
**Version Tested:** 1.1.0
**Test Environment:** _______________

**Notes:**
```
[Add any additional observations or notes here]
```

---

## Appendix: Quick Commands

### Check Service Status
```cmd
sc query HelloClubEventAttendance
sc qc HelloClubEventAttendance
```

### Check Installation Location
```cmd
dir "%LOCALAPPDATA%\Hello Club Event Attendance"
dir "C:\Program Files\Hello Club Event Attendance"
```

### View Logs
```cmd
cd "%LOCALAPPDATA%\Hello Club Event Attendance"
type activity.log
type error.log
```

### Manual Event Fetch (for testing)
```cmd
cd "%LOCALAPPDATA%\Hello Club Event Attendance"
node src\index.js fetch-events
```

### Start Tray Monitor
```cmd
cd "%LOCALAPPDATA%\Hello Club Event Attendance"
npm run tray
```
